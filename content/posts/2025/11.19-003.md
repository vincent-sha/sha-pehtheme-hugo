---
title: "Copilot代码评审功能简介"
date: 2025-11-19
slug: /copilot-code-review-instructions/
description: 本文简要介绍了GitHub Copilot代码评审的功能和基本用法。无论初学者还是开发者，都能通过该功能充分发挥Copilot的智能辅助能力。
image: images/copilot-wallpaper-generic-logo-header.webp
categories:
  - 科技资讯
tags:
  - Copilot
  - AI
draft: false
---
# Copilot代码评审功能：掌握指令文件编写技巧

GitHub Copilot 代码评审（Copilot Code Review，简称 CCR）是 GitHub Copilot 代码评审（Copilot Code Review，简称 CCR）是 GitHub 于 2024 年底推出的 AI 驱动代码审查工具，旨在帮助开发者自动化处理代码审查的重复性工作，提高开发效率。该功能已于 2025 年 4 月正式通用可用（Generally Available），并在 2025 年 10 月和 11 月持续推出公共预览更新，使其更智能、更集成化。作为 Copilot 生态的一部分，它适用于所有付费 Copilot 订阅用户（包括 Individual、Business 和 Enterprise 计划），并支持 GitHub.com、Visual Studio Code (VS Code) 等多编辑器环境。

---

## 主要功能与特性

Copilot 代码评审的核心是通过 AI 代理（Agent）自动扫描拉取请求（Pull Request，PR）或本地代码，识别潜在问题并提供修复建议。以下是其关键特性：

- AI 驱动的智能审查：Copilot 使用大型语言模型（LLM）结合确定性工具（如 ESLint 用于 JavaScript 代码风格检查、CodeQL 用于安全漏洞检测）进行全面分析。它能发现 bug、性能瓶颈、安全隐患，甚至建议代码优化。  审查结果会以行内注释形式附加到代码中，便于开发者快速定位。
- 一键修复与迭代：审查中发现的问题可提供“一键修复”按钮，点击后 Copilot 会生成修复补丁。同时，它支持无缝切换到 Copilot Workspace（Copilot 的工作区体验），让开发者在 PR 上下文中进一步迭代和验证建议。

## 如何使用

1. 在 GitHub.com 上：打开 PR，Copilot 会自动（或手动请求）审查代码。结果显示在 PR 的“Conversation”标签下。
2. 在 VS Code 中：安装 GitHub Copilot 扩展，右键代码选择“Review with Copilot”。
3. 配置自动审查：在仓库设置中启用“Automatic Code Review by GitHub Copilot”。
4. 自定义：在仓库根目录创建 copilot-instructions.md 文件，定义审查语气和优先级（如“优先检查安全性，使用友好语气”）。

## 自定义指令文件

除了集中管理的仓库级`copilot-instructions.md`，Copilot代码评审还支持在`.github/instructions`目录下添加带有`applyTo`元数据的路径特定`*.instructions.md`文件。二者定位不同，建议如下：

- 将语言特定规则放入`.instructions.md`，利用`applyTo`指定适用路径（如`applyTo: **/*.py`）。
- 将专门针对Copilot代码评审或Copilot编码代理的规则分别放入对应的`.instructions.md`，用`excludeAgent`排除不相关代理。
- 不同主题如安全、语言规范等分开管理。
- 通用团队标准和仓库范围规则置于`copilot-instructions.md`。

## 一般建议

- **保持简洁**：Copilot更擅长处理简短且聚焦的指令。建议从小范围开始，逐步迭代。即便是一行指令也能有效引导。过长（超过约1000行）的指令文件可能导致行为不稳定。
- **结构清晰**：使用标题和项目符号，方便Copilot理解和处理信息。
- **直截了当**：简短且命令式的规则效果最佳，避免冗长段落。
- **示例说明**：通过示例代码或解释来演示概念，就像与团队成员沟通一样。

## 指令文件书写要点

有效的指令文件通常具备：

1. 明确的标题
2. 目的与适用范围说明
3. 规则列表，避免密集段落
4. 最佳实践建议
5. 代码风格规范（缩进、命名等）
6. 示例代码块
7. 章节分明
8. 任务专用指令（如测试、接口）
9. 语言/工具上下文
10. 注重可读性和一致性
11. 明确指令（如“优先使用X而非Y”）

## 避免事项

- 不支持更改Copilot评论的用户界面或格式（如字体、大小）
- 不支持修改“Pull Request Overview”注释内容或功能
- 不支持让Copilot执行代码审查之外的操作（如阻止合并）
- 不支持外部链接，需将相关信息直接写入指令文件
- 避免模糊不具体的改进请求（如“更准确”）

## 推荐指令文件结构模板

```yaml
# [你的标题]
*示例：ReactJS开发规范*

## 目的与适用范围
简要描述指令文件涵盖内容及适用场景。

---

## 命名规范
- [添加命名规则，例如“变量名使用camelCase”]

## 代码风格
- [添加代码风格规则，例如“缩进使用2个空格”]

## 错误处理
- [添加错误处理规范]

## 测试
- [添加测试相关规则]

## 安全
- [添加安全相关规则]

---

## 代码示例
```js
// 正确示范
function myFunction() { ... }

// 错误示范
function My_function() { ... }

```